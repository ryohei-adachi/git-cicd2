name: Alive Monitoring
on: push

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
      - name: Check URL status
        id: http_connectivity
        run: |
          status_code=$(curl -s -o /dev/null -w '%{http_code}' "${TARGET_URL}")
          echo "status_code=$status_code" >> "$GITHUB_OUTPUT"
        shell: bash
        env:
          TARGET_URL: "https://xxxxxxxxx"

      - name: Fail if status code is not 200
        if: ${{ steps.http_connectivity.outputs.status_code != '200' }}
        run: exit 1